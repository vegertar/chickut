(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1329:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return IdleScheduler}));var IdleScheduler=function(){function IdleScheduler(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IdleScheduler),function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(this,"task",void 0)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(IdleScheduler,[{key:"request",value:function request(){this.cancel();var request=window.requestIdleCallback||window.requestAnimationFrame;return new Promise((function(resolve){return request(resolve)}))}},{key:"cancel",value:function cancel(){var cancel=window.cancelIdleCallack||window.cancelAnimationFrame;this.task&&cancel(this.task)}}]),IdleScheduler}()},1332:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"JsonDiffWorker",(function(){return JsonDiffWorker}));var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(373),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),nanoid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(553),nanoid__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(nanoid__WEBPACK_IMPORTED_MODULE_1__),_idle_scheduler__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1329);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var JsonDiffWorker=function(){function JsonDiffWorker(worker){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JsonDiffWorker),_defineProperty(this,"queue",new Map),_defineProperty(this,"scheduler",new _idle_scheduler__WEBPACK_IMPORTED_MODULE_2__.a),this.worker=worker,this.worker.addEventListener("message",(function(e){var deferred=_this.queue.get(e.data.id);deferred&&(_this.queue.delete(e.data.id),deferred.resolve(e.data.returns))}))}var _diff;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(JsonDiffWorker,[{key:"diff",value:(_diff=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _callee(input){var id,deferred;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.scheduler.request();case 2:return id=nanoid__WEBPACK_IMPORTED_MODULE_1___default()(),deferred=createDeferrable(),this.queue.set(id,deferred),this.worker.postMessage({method:"diff",id:id,args:[input]}),_context.abrupt("return",deferred);case 7:case"end":return _context.stop()}}),_callee,this)}))),function diff(_x){return _diff.apply(this,arguments)})}]),JsonDiffWorker}();function createDeferrable(){var r,p=new Promise((function(resolve){r=resolve}));return p.resolve=function(){return r.apply(void 0,arguments)},p}}}]);
//# sourceMappingURL=4.a261277703fd81cd3d69.bundle.js.map